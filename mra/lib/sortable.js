(function(e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{window.nativesortable=e()}})(function(){function s(e,t){return(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)")).test(e.className)}function o(e,t){if(!s(e,t)){e.className=e.className?[e.className,t].join(" "):t}}function u(e,t){if(s(e,t)){var n=e.className;e.className=n.replace(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}function a(e,t){if(f(e,t)){t.parentNode.insertBefore(e,t)}else{t.parentNode.insertBefore(e,t.nextSibling)}}function f(e,t){var n=e.parentNode;if(t.parentNode!=n){return false}var r=e.previousSibling;while(r&&r.nodeType!==9){if(r===t){return true}r=r.previousSibling}return false}function l(e,t){var n=t;if(n==e){return null}while(n){if(n.parentNode===e){return n}n=n.parentNode;if(!n||!n.ownerDocument||n.nodeType===11){break}}return null}function c(e){if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}e.returnValue=false}function h(e,t){if(arguments.length==1){return parseInt(e.getAttribute("data-child-dragenter"),10)||0}else if(!t){e.removeAttribute("data-child-dragenter")}else{e.setAttribute("data-child-dragenter",Math.max(0,t))}}var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;var t=!e&&function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}();var n="sortable-child";var r="sortable-dragging";var i="sortable-over";return function(f,p){function k(t){return function(r){var i=e&&r.touches&&r.touches[0]||{};var o=i.target||r.target;if(e&&document.elementFromPoint){o=document.elementFromPoint(r.pageX-document.body.scrollLeft,r.pageY-document.body.scrollTop)}if(s(o,n)){t.apply(o,[r])}else if(o!==f){var u=l(f,o);if(u){t.apply(u,[r])}}}}function L(){if(!t){if(e){f.addEventListener("touchmove",C,false)}else{f.addEventListener("mouseover",S,false);f.addEventListener("mouseout",x,false)}f.addEventListener(e?"touchend":"mouseup",T,false);document.addEventListener(e?"touchend":"mouseup",N,false);document.addEventListener("selectstart",c,false)}}function A(){if(!t){if(e){f.removeEventListener("touchmove",C,false)}else{f.removeEventListener("mouseover",S,false);f.removeEventListener("mouseout",x,false)}f.removeEventListener(e?"touchend":"mouseup",T,false);document.removeEventListener(e?"touchend":"mouseup",N,false);document.removeEventListener("selectstart",c,false)}}if(!p){p={}}var d=!!p.warp;var v=p.stop||function(){};var m=p.start||function(){};var g=p.change||function(){};var y=null;var b=null;var w=k(function(t){if(e){c(t)}if(t.dataTransfer){t.dataTransfer.effectAllowed="moving";t.dataTransfer.setData("Text","*")}y=this;o(y,r);[].forEach.call(f.childNodes,function(e){if(e.nodeType===1){o(e,n)}});L()});var E=k(function(e){if(!y){return true}if(e.preventDefault){e.preventDefault()}return false});var S=k(function(e){if(!y||y===this){return true}var t=h(this);h(this,t+1);if(t===0){o(this,i);if(!d){a(y,this)}}return false});var x=k(function(e){var t=h(this);h(this,t-1);if(!h(this)){u(this,i);h(this,false)}});var T=k(function(e){if(e.type==="drop"){if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}}if(this===y){return}if(d){var t=y.nextSibling;this.parentNode.insertBefore(y,this);this.parentNode.insertBefore(this,t)}g(this,y)});var N=function(e){y=null;b=null;[].forEach.call(f.childNodes,function(e){if(e.nodeType===1){u(e,i);u(e,r);u(e,n);h(e,false)}});A()};var C=k(function(e){if(!y||y===this||b===this){return true}[].forEach.call(f.childNodes,function(e){u(e,i)});b=this;if(!d){a(y,this)}else{o(this,i)}return c(e)});if(t){f.addEventListener("dragstart",w,false);f.addEventListener("dragenter",S,false);f.addEventListener("dragleave",x,false);f.addEventListener("drop",T,false);f.addEventListener("dragover",E,false);f.addEventListener("dragend",N,false)}else{if(e){f.addEventListener("touchstart",w,false)}else{f.addEventListener("mousedown",w,false)}}[].forEach.call(f.childNodes,function(e){if(e.nodeType===1){e.setAttribute("draggable","true")}})}})
